<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">
    <meta name="description" content="Plan Financier de Vie - Syst√®me de gestion d'affili√©s">
    <title>PFV 1.0 - Plan Financier de Vie</title>
    
    <!-- PWA Meta -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">‚óÜ</span>
                <span class="logo-text">PFV</span>
                <span class="version">v1.0</span>
            </div>
            <button class="menu-btn" id="menuBtn" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Navigation Sidebar -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Menu</h2>
            <button class="close-btn" id="closeBtn">&times;</button>
        </div>
        <ul class="nav-list">
            <li><a href="#dashboard" class="nav-link active" data-view="dashboard">
                <span class="nav-icon">üìä</span> Tableau de bord
            </a></li>
            <li><a href="#affilies" class="nav-link" data-view="affilies">
                <span class="nav-icon">üë•</span> Mes affili√©s
            </a></li>
            <li><a href="#ajouter" class="nav-link" data-view="ajouter">
                <span class="nav-icon">‚ûï</span> Ajouter affili√©
            </a></li>
            <li><a href="#regles" class="nav-link" data-view="regles">
                <span class="nav-icon">üìã</span> R√®gles PFV
            </a></li>
            <li><a href="#export" class="nav-link" data-view="export">
                <span class="nav-icon">üíæ</span> Export donn√©es
            </a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard View -->
        <section id="view-dashboard" class="view active">
            <h1 class="page-title">Tableau de bord</h1>
            
            <div class="stats-grid">
                <div class="stat-card stat-primary">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalAffiliates">0</div>
                        <div class="stat-label">Total affili√©s</div>
                    </div>
                </div>
                
                <div class="stat-card stat-success">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalGains">0 FCFA</div>
                        <div class="stat-label">Gains totaux</div>
                    </div>
                </div>
                
                <div class="stat-card stat-info">
                    <div class="stat-icon">üîó</div>
                    <div class="stat-content">
                        <div class="stat-value" id="directAffiliates">0/2</div>
                        <div class="stat-label">Affili√©s directs</div>
                    </div>
                </div>
                
                <div class="stat-card stat-warning">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-content">
                        <div class="stat-value" id="networkLevel">Niveau 0</div>
                        <div class="stat-label">Progression</div>
                    </div>
                </div>
            </div>

            <div class="network-visual">
                <h2 class="section-title">Structure du r√©seau</h2>
                <div class="network-tree" id="networkTree">
                    <div class="tree-level">
                        <div class="tree-node root">
                            <div class="node-content">Vous</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Affili√©s View -->
        <section id="view-affilies" class="view">
            <h1 class="page-title">Mes affili√©s</h1>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Rechercher un affili√©..." class="search-input">
            </div>

            <div class="affiliates-list" id="affiliatesList">
                <div class="empty-state">
                    <div class="empty-icon">üì≠</div>
                    <p>Aucun affili√© pour le moment</p>
                    <p class="empty-subtitle">Commencez par ajouter votre premier affili√©</p>
                </div>
            </div>
        </section>

        <!-- Ajouter View -->
        <section id="view-ajouter" class="view">
            <h1 class="page-title">Ajouter un affili√©</h1>
            
            <div class="form-container">
                <form id="addAffiliateForm" class="affiliate-form">
                    <div class="form-group">
                        <label for="affiliateName">Nom complet</label>
                        <input type="text" id="affiliateName" required placeholder="Ex: Jean Dupont">
                    </div>
                    
                    <div class="form-group">
                        <label for="affiliateContact">Contact</label>
                        <input type="tel" id="affiliateContact" required placeholder="Ex: +225 0701020304">
                    </div>
                    
                    <div class="form-group">
                        <label for="affiliateParent">Affili√© √†</label>
                        <select id="affiliateParent" required>
                            <option value="">-- S√©lectionner --</option>
                        </select>
                    </div>
                    
                    <div class="form-info">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        <span>Chaque membre peut avoir maximum 2 affili√©s directs</span>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <span>Ajouter l'affili√©</span>
                    </button>
                </form>
            </div>
        </section>

        <!-- R√®gles View -->
        <section id="view-regles" class="view">
            <h1 class="page-title">R√®gles officielles PFV</h1>
            
            <div class="rules-container">
                <div class="rules-header">
                    <span class="lock-icon">üîí</span>
                    <span>VERSION VERROUILL√âE 1.0</span>
                </div>

                <div class="rule-section">
                    <h3>1. Structure</h3>
                    <ul>
                        <li>Maximum 2 affili√©s directs par membre</li>
                        <li>Croissance binaire : 1, 2, 4, 8, 16... jusqu'√† 16 384</li>
                        <li>Structure strictement binaire</li>
                    </ul>
                </div>

                <div class="rule-section">
                    <h3>2. Calcul des gains</h3>
                    <ul>
                        <li>Gain de base : <strong>80 FCFA</strong> par affili√©</li>
                        <li>Gain total = nombre d'affili√©s √ó 80 FCFA</li>
                        <li>Calcul automatique par le syst√®me</li>
                    </ul>
                </div>

                <div class="rule-section">
                    <h3>3. Inscription</h3>
                    <ul>
                        <li>Nom et contact valides obligatoires</li>
                        <li>Identifiant unique pour chaque affili√©</li>
                        <li>Aucun compte fictif autoris√©</li>
                        <li>Aucun doublon</li>
                    </ul>
                </div>

                <div class="rule-section">
                    <h3>4. Limites du syst√®me</h3>
                    <ul>
                        <li>Plafond : 16 384 affili√©s par r√©seau</li>
                        <li>Maximum 2 affili√©s directs (non modifiable)</li>
                    </ul>
                </div>

                <div class="rule-section">
                    <h3>5. Gouvernance</h3>
                    <ul>
                        <li>R√®gles modifiables uniquement par l'admin fondateur</li>
                        <li>Toute modification non autoris√©e invalide le syst√®me</li>
                        <li>Validation admin pour inscriptions et exports</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Export View -->
        <section id="view-export" class="view">
            <h1 class="page-title">Export des donn√©es</h1>
            
            <div class="export-container">
                <div class="export-card">
                    <div class="export-icon">üìÑ</div>
                    <h3>Export CSV</h3>
                    <p>Exporter la liste compl√®te des affili√©s au format CSV</p>
                    <button class="btn btn-secondary" id="exportCsvBtn">
                        T√©l√©charger CSV
                    </button>
                </div>

                <div class="export-card">
                    <div class="export-icon">üìã</div>
                    <h3>Export TXT</h3>
                    <p>Exporter les r√®gles officielles PFV au format texte</p>
                    <button class="btn btn-secondary" id="exportTxtBtn">
                        T√©l√©charger TXT
                    </button>
                </div>

                <div class="export-card">
                    <div class="export-icon">üìä</div>
                    <h3>Rapport complet</h3>
                    <p>G√©n√©rer un rapport d√©taill√© avec statistiques</p>
                    <button class="btn btn-secondary" id="exportReportBtn">
                        G√©n√©rer rapport
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker enregistr√©'))
                    .catch(err => console.log('Erreur Service Worker:', err));
            });
        }
    </script>
</body>
</html>
